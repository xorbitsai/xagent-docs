import { extractImportSources } from './extractImportSources.js';
import { resolveImportPath } from './resolveImportPath.js';
export const buildImportMap = (files) => {
    const importedFiles = new Set();
    const fileImportsMap = new Map();
    for (const file of files) {
        const resolvedImports = new Set();
        for (const source of extractImportSources(file.tree)) {
            const resolved = resolveImportPath(source, file.path);
            if (resolved) {
                const normalized = resolved.toLowerCase();
                importedFiles.add(normalized);
                resolvedImports.add(normalized);
            }
        }
        fileImportsMap.set(file.path.toLowerCase(), resolvedImports);
    }
    return { importedFiles, fileImportsMap };
};
